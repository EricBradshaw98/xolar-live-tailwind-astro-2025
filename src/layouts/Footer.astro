---
import xolarLogo from '../assets/XOLARLARGE.webp';
import { ontarioData } from '../data/locations/ontario';
import { britishColumbiaData } from '../data/locations/british-columbia';
import { albertaData } from '../data/locations/alberta';
import { quebecData } from '../data/locations/quebec';
import { saskatchewanData } from '../data/locations/saskatchewan';
import { manitobaData } from '../data/locations/manitoba';
import { novaScotiaData } from '../data/locations/nova-scotia';
import { newBrunswickData } from '../data/locations/new-brunswick';
import { newfoundlandLabradorData } from '../data/locations/newfoundland-labrador';
import { princeEdwardIslandData } from '../data/locations/prince-edward-island';

const currentYear = new Date().getFullYear();

// Use all province location data for footer
const serviceAreas = [
  {
    province: 'Ontario',
    slug: 'ontario',
    cities: ontarioData.cities
  },
  {
    province: 'British Columbia',
    slug: 'british-columbia',
    cities: britishColumbiaData.cities
  },
  {
    province: 'Alberta',
    slug: 'alberta',
    cities: albertaData.cities
  },
  {
    province: 'Quebec',
    slug: 'quebec',
    cities: quebecData.cities
  },
  {
    province: 'Saskatchewan',
    slug: 'saskatchewan',
    cities: saskatchewanData.cities
  },
  {
    province: 'Manitoba',
    slug: 'manitoba',
    cities: manitobaData.cities
  },
  {
    province: 'Nova Scotia',
    slug: 'nova-scotia',
    cities: novaScotiaData.cities
  },
  {
    province: 'New Brunswick',
    slug: 'new-brunswick',
    cities: newBrunswickData.cities
  },
  {
    province: 'Newfoundland and Labrador',
    slug: 'newfoundland-labrador',
    cities: newfoundlandLabradorData.cities
  },
  {
    province: 'Prince Edward Island',
    slug: 'prince-edward-island',
    cities: princeEdwardIslandData.cities
  }
];
---

<footer class="bg-gray-50 text-gray-900 border-t border-gray-200" role="contentinfo">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16">
    <!-- Main Footer Content -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12 mb-8">
      <!-- Company Info -->
      <div class="lg:col-span-2">
        <div class="flex items-center space-x-3 mb-4">
          <img
            src={xolarLogo.src}
            alt="Xolar Inc. Logo"
            class="h-8 w-auto"
            width={xolarLogo.width}
            height={xolarLogo.height}
          />
        </div>

        <p class="text-gray-600 mb-6 max-w-md leading-relaxed">
          Canada's leading solar energy installation company, helping homeowners and businesses
          transition to clean, renewable energy since 2021.
        </p>

        <!-- Contact Info -->
        <div class="space-y-3">
          <div class="flex items-center space-x-3">
            <svg
              class="w-5 h-5 text-primary-600 flex-shrink-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
              ></path>
            </svg>
            <a
              href="tel:+1-800-XOLAR-CA"
              class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
            >
              1-800-XOLAR-CA
            </a>
          </div>

          <div class="flex items-center space-x-3">
            <svg
              class="w-5 h-5 text-primary-600 flex-shrink-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
              ></path>
            </svg>
            <a
              href="mailto:info@xolar.ca"
              class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
            >
              info@xolar.ca
            </a>
          </div>

          <div class="flex items-center space-x-3">
            <svg
              class="w-5 h-5 text-primary-600 flex-shrink-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
              ></path>
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            <span class="text-gray-700">Serving all of Canada</span>
          </div>
        </div>
      </div>

      <!-- Quick Links -->
      <div>
        <h3 class="text-lg font-semibold mb-4 text-primary-600">Services</h3>
        <nav aria-label="Footer services navigation">
          <ul class="space-y-3" role="list">
            <li>
              <a
                href="/residential/solar-panels"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                Residential Solar
              </a>
            </li>
            <li>
              <a
                href="/commercial/solar-solutions"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                Commercial Solar
              </a>
            </li>
            <li>
              <a
                href="/residential/tesla-powerwall"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                Tesla Powerwall
              </a>
            </li>
            <li>
              <a
                href="/residential/ev-charging"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                EV Charging
              </a>
            </li>
            <li>
              <a
                href="/residential/heat-pumps"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                Heat Pumps
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <!-- Resources -->
      <div>
        <h3 class="text-lg font-semibold mb-4 text-primary-600">Resources</h3>
        <nav aria-label="Footer resources navigation">
          <ul class="space-y-3" role="list">
            <li>
              <a
                href="/calculator"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                Solar Calculator
              </a>
            </li>
            <li>
              <a
                href="/financing"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                Financing Options
              </a>
            </li>
            <li>
              <a
                href="/warranties"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                Warranties
              </a>
            </li>
            <li>
              <a
                href="/maintenance"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                Maintenance
              </a>
            </li>
            <li>
              <a
                href="/faq"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                FAQ
              </a>
            </li>
            <li>
              <a
                href="/installers/projects"
                class="text-gray-700 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline transition-colors duration-200"
              >
                Installer Projects
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>

    <!-- Service Areas Section -->
    <div class="border-t border-gray-700 pt-8 mb-8">
      <h3 class="text-lg font-semibold mb-6 text-primary-600">Solar Panel Installation - Service Areas</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 items-start">
        {
          serviceAreas.map((area, index) => (
            <div class="service-area-container">
              <div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
                <div class="flex items-center area-toggle cursor-pointer hover:bg-gray-50 transition-colors duration-200" data-area-id={`area-${index}`}>
                  <a
                    href={`/solar-panels/${area.slug}`}
                    class="flex-1 px-4 py-3 font-medium text-gray-900 hover:text-primary-600 transition-colors duration-200"
                    onclick="event.stopPropagation()"
                  >
                    Solar Panels in {area.province}
                  </a>
                  <div class="px-3 py-3">
                    <svg
                      class="w-4 h-4 text-gray-500 transform transition-transform duration-300 area-chevron"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 9l-7 7-7-7"
                      />
                    </svg>
                  </div>
                </div>
                <div class="service-area-content px-4 pb-3" data-content-id={`area-${index}`} style="max-height: 0; opacity: 0; overflow: hidden; transition: max-height 0.4s ease, opacity 0.3s ease;">
                  <ul class="space-y-2">
                    {area.cities.slice(0, 6).map((city) => (
                      <li>
                        <div class="text-sm text-gray-600">
                          <a
                            href={`/solar-panels/${area.slug}/${city.slug}`}
                            class="font-medium mb-1 text-gray-800 hover:text-primary-600 transition-colors duration-200"
                          >
                            {city.name}
                          </a>
                          <div class="text-xs text-gray-500 mt-1">
                            {city.data.solarPotential}
                          </div>
                          <div class="text-xs text-gray-500 mt-1">
                            Save {city.data.averageSavings}/year
                          </div>
                        </div>
                      </li>
                    ))}
                    {area.cities.length > 6 && (
                      <li class="pt-2">
                        <a
                          href={`/solar-panels/${area.slug}`}
                          class="text-sm font-medium text-primary-600 hover:text-primary-700 hover:underline"
                        >
                          + {area.cities.length - 6} more cities →
                        </a>
                      </li>
                    )}
                  </ul>
                </div>
              </div>
            </div>
          ))
        }
      </div>
    </div>

    <!-- Social Links and Certifications -->
    <div class="border-t border-gray-700 pt-8 mb-8">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between">
        <!-- Social Links -->
        <div class="mb-6 md:mb-0">
          <h3 class="text-sm font-semibold text-primary-600 uppercase tracking-wide mb-3">
            Follow Us
          </h3>
          <div class="flex space-x-4">
            <a
              href="https://facebook.com/xolar"
              class="text-gray-600 hover:text-primary-600 focus:text-primary-600 focus:outline-none transition-colors duration-200"
              aria-label="Follow Xolar on Facebook"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                ></path>
              </svg>
            </a>

            <a
              href="https://linkedin.com/company/xolar"
              class="text-gray-600 hover:text-primary-600 focus:text-primary-600 focus:outline-none transition-colors duration-200"
              aria-label="Follow Xolar on LinkedIn"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
                ></path>
              </svg>
            </a>

            <a
              href="https://twitter.com/xolar"
              class="text-gray-600 hover:text-primary-600 focus:text-primary-600 focus:outline-none transition-colors duration-200"
              aria-label="Follow Xolar on Twitter"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"
                ></path>
              </svg>
            </a>
          </div>
        </div>

        <!-- Certifications -->
        <div>
          <h3 class="text-sm font-semibold text-primary-600 uppercase tracking-wide mb-3">
            Certifications
          </h3>
          <div class="flex items-center space-x-6">
            <div class="text-center">
              <div class="w-12 h-8 flex items-center justify-center mb-1">
                <img src="/images/tesla-logo.svg" alt="Tesla" class="h-5 w-auto text-gray-600" />
              </div>
              <span class="text-xs text-gray-500">Certified</span>
            </div>
            <div class="text-center">
              <div class="w-12 h-8 bg-green-600 rounded flex items-center justify-center mb-1">
                <span class="text-xs font-bold text-white">CSA</span>
              </div>
              <span class="text-xs text-gray-500">Approved</span>
            </div>
            <div class="text-center">
              <div class="w-12 h-8 bg-blue-700 rounded flex items-center justify-center mb-1">
                <span class="text-xs font-bold text-white">BBB</span>
              </div>
              <span class="text-xs text-gray-500">A+ Rating</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="border-t border-gray-300 pt-8">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between">
        <!-- Copyright -->
        <div class="text-gray-600 text-sm mb-4 md:mb-0">
          <p>&copy; {currentYear} Xolar Inc. All rights reserved.</p>
        </div>

        <!-- Legal Links -->
        <nav aria-label="Legal navigation" class="flex flex-wrap items-center space-x-6">
          <a
            href="/about"
            class="text-gray-600 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline text-sm transition-colors duration-200"
          >
            About Us
          </a>
          <a
            href="/privacy-policy"
            class="text-gray-600 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline text-sm transition-colors duration-200"
          >
            Privacy Policy
          </a>
          <a
            href="/terms-of-service"
            class="text-gray-600 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline text-sm transition-colors duration-200"
          >
            Terms of Service
          </a>
          <!-- <a href="/accessibility" 
             class="text-gray-600 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline text-sm transition-colors duration-200">
            Accessibility
          </a> -->
          <a
            href="/sitemap"
            class="text-gray-600 hover:text-primary-600 focus:text-primary-600 focus:outline-none focus:underline text-sm transition-colors duration-200"
          >
            Sitemap
          </a>
        </nav>
      </div>
    </div>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const allToggleButtons = document.querySelectorAll('.area-toggle');

    allToggleButtons.forEach((button) => {
      button.addEventListener('click', function() {
        const areaId = this.getAttribute('data-area-id');
        const content = document.querySelector(`[data-content-id="${areaId}"]`);
        const chevron = this.querySelector('.area-chevron');

        if (!content) return;

        const isOpen = content.style.maxHeight && content.style.maxHeight !== '0px';

        if (isOpen) {
          // Collapse
          content.style.maxHeight = '0';
          content.style.opacity = '0';
          if (chevron) {
            chevron.style.transform = 'rotate(0deg)';
          }
        } else {
          // Expand
          content.style.maxHeight = content.scrollHeight + 'px';
          content.style.opacity = '1';
          if (chevron) {
            chevron.style.transform = 'rotate(180deg)';
          }

          // Reset to auto after animation for responsive behavior
          setTimeout(() => {
            if (content.style.opacity === '1') {
              content.style.maxHeight = 'none';
            }
          }, 400);
        }
      });
    });
  });
</script>

<style>
  /* Hide default details marker */
  .service-area-details summary {
    list-style: none;
  }

  .service-area-details summary::-webkit-details-marker {
    display: none;
  }

  /* Service area container styling - isolate each container */
  .service-area-container {
    display: block;
    width: 100%;
    align-self: start; /* Prevent grid items from stretching */
  }

  /* Smooth animation for service area details */
  .service-area-details {
    height: fit-content; /* Prevent unnecessary height expansion */
  }

  .service-area-content {
    overflow: hidden;
    transition:
      max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1),
      opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Smooth arrow rotation */
  .area-chevron {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Support for reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .service-area-content,
    .area-chevron {
      transition: none;
    }
  }
</style>
